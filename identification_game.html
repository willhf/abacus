<html>
	<head>
	</head>
	<body>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="abacus.js" charset="utf-8"></script>
	<p> type the number shown, then hit space (or any non-digit character) for grading </p>
	<form>
		<input id="answer" autofocus type="text" oninput="identification_game();"/ >
	</form>
	<script type="text/javascript">

	var answer = random_number(10*1000);
	var ab = new Abacus(answer, function(x){});

	function identification_game() {
		var guess_string = document.getElementById("answer").value;
		var reg = new RegExp('^[0-9]*$');

		if (reg.test(guess_string)) {
			// the number is not finished yet
			return;
		}
		var guess_int = parseInt(guess_string);

		document.getElementById("answer").value = "";

		if (guess_int != answer) {
			alert("incorrect!");
			return;
		}

		answer = random_number(10*1000);
		ab.set_number(answer);
	}
	</script>
	<a href="javascript:void(0);" onclick="ab.toggle_labels();">toggle labels</a>
	</body>
</html>

