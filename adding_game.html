<html>
	<head>
	</head>
	<a href="javascript:void(0);" onclick="reset_question();">reset question</a>
	<body>
	<div id="question" style="font-size: 5em;"></div>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="abacus.js" charset="utf-8"></script>
	<script type="text/javascript">

	function random_nonzero_digit() {
		return random_number(9) + 1;
	}

	var start = random_number(1000);
	var next_add = random_nonzero_digit();
	var answer = start + next_add;
	document.getElementById('question').innerHTML = next_add;

	var abacus = new Abacus(4, start, function(ab) {
		var val = ab.get_number();

		if (val != answer) {
			return;
		}

		var prev_next_add = next_add;
		next_add = random_nonzero_digit();
		while (next_add == prev_next_add) {
			next_add = random_nonzero_digit();
		}
		start = answer;
		answer = val + next_add;
		document.getElementById('question').innerHTML = next_add;
	});

	function reset_question() {
		abacus.set_number(start);
	}

	</script>
	<a href="javascript:void(0);" onclick="abacus.toggle_labels();">toggle labels</a>
	</body>
</html>

